<template>
  <!-- ë°©ê¸ˆ ì£¼ì‹  template ê·¸ëŒ€ë¡œ ìœ ì§€ -->
  <div class="min-h-screen bg-indigo-50 py-10 flex justify-center">
    <div class="w-[90%] max-w-4xl bg-white border-2 border-gray-200 rounded-lg shadow-md p-8">
      <!-- ê²Œì‹œê¸€ -->
      <h1 class="text-2xl font-bold text-gray-800 mb-4">{{ post?.title }}</h1>
      <div class="flex justify-between items-center text-sm text-gray-600 border-b pb-3 mb-6">
        <span>ğŸ‘¤ {{ post?.authorNickname }}</span>
        <div class="flex items-center space-x-4">
          <span>â° {{ formatDate(post?.createdAt) }}</span>
          <span>ğŸ‘ï¸ ì¡°íšŒìˆ˜ {{ post?.view }}</span>
          <template v-if="store.id && post?.authorId === store.id">
            <button @click="editPost" class="px-3 py-1 bg-yellow-500 text-white rounded text-xs">ìˆ˜ì •</button>
            <button @click="deletePost" class="px-3 py-1 bg-red-500 text-white rounded text-xs">ì‚­ì œ</button>
          </template>
        </div>
      </div>

      <!-- ê²Œì‹œê¸€ ë‚´ìš© -->
      <div class="prose max-w-none text-gray-800 mb-8 min-h-[300px]" v-html="post?.content"></div>

      <!-- ì¢‹ì•„ìš”/ì‹«ì–´ìš” ë²„íŠ¼ -->
      <div class="flex justify-center items-center space-x-6 mb-6">
        <button @click="reactToPost('LIKE')" class="px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600">
          ğŸ‘ ì¢‹ì•„ìš” {{ post?.likeCount }}
        </button>
        <button @click="reactToPost('DISLIKE')" class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600">
          ğŸ‘ ì‹«ì–´ìš” {{ post?.dislikeCount }}
        </button>
      </div>

      <!-- ëŒ“ê¸€ ì˜ì—­ -->
      <!-- (ëŒ“ê¸€/ëŒ€ëŒ“ê¸€ template ê·¸ëŒ€ë¡œ ìœ ì§€) -->
      <!-- ... -->
    </div>
  </div>
</template>

<script setup>
import usePost from '@/pages/scripts/Post.js'

const {
  store,
  post,
  comments,
  replies,
  newComment,
  newReplies,
  currentPage,
  totalPages,
  hasNextPage,
  activeReplyBox,
  visiblePages,
  formatDate,
  fetchPost,
  fetchComments,
  createComment,
  createReply,
  toggleReplyBox,
  prevPage,
  nextPage,
  goToPage,
  editComment,
  deleteComment,
  editReply,
  deleteReply,
  editPost,
  deletePost,
  reactToPost
} = usePost()
</script>